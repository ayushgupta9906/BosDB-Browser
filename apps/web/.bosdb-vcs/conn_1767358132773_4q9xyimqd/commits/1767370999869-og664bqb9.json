{
  "id": "1767370999869-og664bqb9",
  "message": "fsdghg",
  "author": {
    "name": "Ayush Gupta",
    "email": "ayush@flipkart.com",
    "userId": "ayush",
    "timestamp": "2026-01-02T16:23:19.868Z"
  },
  "timestamp": "2026-01-02T16:23:19.869Z",
  "parentIds": [],
  "treeId": "1767370999869-og664bqb9",
  "changes": [
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "departments",
      "tableName": "departments",
      "description": "Create table departments",
      "query": "CREATE TABLE departments (\r\n    dept_id SERIAL PRIMARY KEY,\r\n    dept_name VARCHAR(100) UNIQUE NOT NULL,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n)",
      "rollbackSQL": "DROP TABLE IF EXISTS departments;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:56:59.478Z",
      "id": "change-1767358619478-f3fizc60q"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "employees",
      "tableName": "employees",
      "description": "Create table employees",
      "query": "CREATE TABLE employees (\r\n    emp_id SERIAL PRIMARY KEY,\r\n    first_name VARCHAR(50) NOT NULL,\r\n    last_name VARCHAR(50),\r\n    email VARCHAR(100) UNIQUE NOT NULL,\r\n    phone VARCHAR(20),\r\n    salary NUMERIC(10,2) CHECK (salary >= 0),\r\n    dept_id INT REFERENCES departments(dept_id),\r\n    is_active BOOLEAN DEFAULT TRUE,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n)",
      "rollbackSQL": "DROP TABLE IF EXISTS employees;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:57:08.509Z",
      "id": "change-1767358628509-jrz3w4vmt"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "employee_addresses",
      "tableName": "employee_addresses",
      "description": "Create table employee_addresses",
      "query": "CREATE TABLE employee_addresses (\r\n    address_id SERIAL PRIMARY KEY,\r\n    emp_id INT REFERENCES employees(emp_id) ON DELETE CASCADE,\r\n    address_line TEXT,\r\n    city VARCHAR(50),\r\n    state VARCHAR(50),\r\n    country VARCHAR(50),\r\n    pincode VARCHAR(10)\r\n)",
      "rollbackSQL": "DROP TABLE IF EXISTS employee_addresses;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:57:16.631Z",
      "id": "change-1767358636631-e5e7li3zn"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "employee_audit",
      "tableName": "employee_audit",
      "description": "Create table employee_audit",
      "query": "CREATE TABLE employee_audit (\r\n    audit_id SERIAL PRIMARY KEY,\r\n    emp_id INT,\r\n    action VARCHAR(20),\r\n    old_data JSONB,\r\n    new_data JSONB,\r\n    action_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n)",
      "rollbackSQL": "DROP TABLE IF EXISTS employee_audit;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:57:21.447Z",
      "id": "change-1767358641447-f73npzyis"
    },
    {
      "type": "DATA",
      "operation": "INSERT",
      "target": "departments",
      "tableName": "departments",
      "description": "Insert 4 row(s) into departments",
      "query": "INSERT INTO departments (dept_name)\r\nVALUES\r\n('Engineering'),\r\n('HR'),\r\n('Finance'),\r\n('Operations')",
      "affectedRows": 4,
      "rollbackSQL": "MANUAL",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:58:01.948Z",
      "id": "change-1767358681948-vp0ud8sim"
    },
    {
      "type": "DATA",
      "operation": "INSERT",
      "target": "employees",
      "tableName": "employees",
      "description": "Insert 4 row(s) into employees",
      "query": "INSERT INTO employees (\r\n    first_name,\r\n    last_name,\r\n    email,\r\n    phone,\r\n    salary,\r\n    dept_id\r\n)\r\nVALUES\r\n('Ayush', 'Gupta', 'ayush@company.com', '9999999999', 75000, 1),\r\n('Rahul', 'Sharma', 'rahul@company.com', '8888888888', 55000, 2),\r\n('Neha', 'Verma', 'neha@company.com', '7777777777', 65000, 1),\r\n('Priya', 'Singh', 'priya@company.com', '6666666666', 60000, 3)",
      "affectedRows": 4,
      "rollbackSQL": "MANUAL",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:58:09.056Z",
      "id": "change-1767358689056-izw36dop4"
    },
    {
      "type": "DATA",
      "operation": "INSERT",
      "target": "employee_addresses",
      "tableName": "employee_addresses",
      "description": "Insert 4 row(s) into employee_addresses",
      "query": "INSERT INTO employee_addresses (\r\n    emp_id,\r\n    address_line,\r\n    city,\r\n    state,\r\n    country,\r\n    pincode\r\n)\r\nVALUES\r\n(1, 'Sector 62', 'Noida', 'UP', 'India', '201301'),\r\n(2, 'MG Road', 'Bengaluru', 'Karnataka', 'India', '560001'),\r\n(3, 'Andheri East', 'Mumbai', 'Maharashtra', 'India', '400069'),\r\n(4, 'Salt Lake', 'Kolkata', 'West Bengal', 'India', '700091')",
      "affectedRows": 4,
      "rollbackSQL": "MANUAL",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:58:16.022Z",
      "id": "change-1767358696022-9c5g8nh08"
    },
    {
      "type": "DATA",
      "operation": "INSERT",
      "target": "employee_audit",
      "tableName": "employee_audit",
      "description": "Insert 1 row(s) into employee_audit",
      "query": "INSERT INTO employee_audit (\r\n    emp_id,\r\n    action,\r\n    old_data,\r\n    new_data\r\n)\r\nVALUES (\r\n    1,\r\n    'MANUAL_TEST',\r\n    NULL,\r\n    '{\"salary\":75000,\"status\":\"active\"}'\r\n)",
      "affectedRows": 1,
      "rollbackSQL": "MANUAL",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T12:58:20.195Z",
      "id": "change-1767358700195-q6ffpy25a"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "add_employee",
      "description": "Create function add_employee",
      "query": "CREATE OR REPLACE FUNCTION add_employee()\r\nRETURNS void\r\nLANGUAGE plpgsql\r\nAS $$\r\nBEGIN\r\n    INSERT INTO employees (first_name, last_name, email, phone, salary, dept_id)\r\n    VALUES ('Ayush', 'Gupta', 'ayush@company.com', '9999999999', 75000, 1);\r\nEND;\r\n$$",
      "rollbackSQL": "DROP FUNCTION add_employee;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T13:12:07.672Z",
      "id": "change-1767359527672-vcs9tkd1y"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "add_employee",
      "description": "Create procedure add_employee",
      "query": "CREATE OR REPLACE PROCEDURE add_employee(\r\n    p_first_name VARCHAR,\r\n    p_last_name  VARCHAR,\r\n    p_email      VARCHAR,\r\n    p_phone      VARCHAR,\r\n    p_salary     NUMERIC,\r\n    p_dept_id    INT\r\n)\r\nLANGUAGE plpgsql\r\nAS '\r\nBEGIN\r\n    INSERT INTO employees (\r\n        first_name, last_name, email, phone, salary, dept_id\r\n    )\r\n    VALUES (\r\n        p_first_name, p_last_name, p_email, p_phone, p_salary, p_dept_id\r\n    );\r\nEND;\r\n'",
      "rollbackSQL": "DROP PROCEDURE add_employee;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T13:12:32.041Z",
      "id": "change-1767359552041-6hocdxf69"
    },
    {
      "type": "SCHEMA",
      "operation": "CREATE",
      "target": "add_employee",
      "description": "Create procedure add_employee",
      "query": "CREATE OR REPLACE PROCEDURE add_employee(\r\n    p_first_name VARCHAR,\r\n    p_last_name  VARCHAR,\r\n    p_email      VARCHAR,\r\n    p_phone      VARCHAR,\r\n    p_salary     NUMERIC,\r\n    p_dept_id    INT\r\n)\r\nLANGUAGE plpgsql\r\nAS '\r\nBEGIN\r\n    INSERT INTO employees (\r\n        first_name,\r\n        last_name,\r\n        email,\r\n        phone,\r\n        salary,\r\n        dept_id\r\n    )\r\n    VALUES (\r\n        p_first_name,\r\n        p_last_name,\r\n        p_email,\r\n        p_phone,\r\n        p_salary,\r\n        p_dept_id\r\n    );\r\nEND;\r\n'",
      "rollbackSQL": "DROP PROCEDURE add_employee;",
      "status": "APPLIED",
      "metadata": {},
      "timestamp": "2026-01-02T13:18:23.513Z",
      "id": "change-1767359903513-82jlkmhzi"
    }
  ],
  "branchName": "main"
}