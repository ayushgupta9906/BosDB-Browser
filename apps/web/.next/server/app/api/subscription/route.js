"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/subscription/route";
exports.ids = ["app/api/subscription/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubscription%2Froute&page=%2Fapi%2Fsubscription%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubscription%2Froute.ts&appDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubscription%2Froute&page=%2Fapi%2Fsubscription%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubscription%2Froute.ts&appDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Arush_Gupta_Downloads_BosDB_Browser_apps_web_src_app_api_subscription_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/subscription/route.ts */ \"(rsc)/./src/app/api/subscription/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/subscription/route\",\n        pathname: \"/api/subscription\",\n        filename: \"route\",\n        bundlePath: \"app/api/subscription/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Arush Gupta\\\\Downloads\\\\BosDB-Browser\\\\apps\\\\web\\\\src\\\\app\\\\api\\\\subscription\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Arush_Gupta_Downloads_BosDB_Browser_apps_web_src_app_api_subscription_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/subscription/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdWJzY3JpcHRpb24lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN1YnNjcmlwdGlvbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN1YnNjcmlwdGlvbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBcnVzaCUyMEd1cHRhJTVDRG93bmxvYWRzJTVDQm9zREItQnJvd3NlciU1Q2FwcHMlNUN3ZWIlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0FydXNoJTIwR3VwdGElNUNEb3dubG9hZHMlNUNCb3NEQi1Ccm93c2VyJTVDYXBwcyU1Q3dlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2tEO0FBQy9IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvc2RiL3dlYi8/ZTJkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxBcnVzaCBHdXB0YVxcXFxEb3dubG9hZHNcXFxcQm9zREItQnJvd3NlclxcXFxhcHBzXFxcXHdlYlxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxzdWJzY3JpcHRpb25cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdWJzY3JpcHRpb24vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdWJzY3JpcHRpb25cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N1YnNjcmlwdGlvbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEFydXNoIEd1cHRhXFxcXERvd25sb2Fkc1xcXFxCb3NEQi1Ccm93c2VyXFxcXGFwcHNcXFxcd2ViXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHN1YnNjcmlwdGlvblxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3Vic2NyaXB0aW9uL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubscription%2Froute&page=%2Fapi%2Fsubscription%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubscription%2Froute.ts&appDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/subscription/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/subscription/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/subscription */ \"(rsc)/./src/lib/subscription.ts\");\n\n\n\n// GET /api/subscription - Get organization subscription status\nasync function GET(request) {\n    try {\n        // Get organization from query params or user\n        const orgId = request.nextUrl.searchParams.get(\"orgId\");\n        if (!orgId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                subscription: {\n                    plan: \"free\",\n                    isTrial: false\n                },\n                isPro: false,\n                isTrial: false\n            });\n        }\n        let org = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.findOrganizationById)(orgId);\n        // Auto-create default admin org if missing\n        if (!org && orgId === \"ind-admin\") {\n            console.log(\"[Subscription API] Auto-creating missing default admin org\");\n            const adminOrg = {\n                id: \"ind-admin\",\n                name: \"Administrator Workspace\",\n                type: \"individual\",\n                adminUserId: \"admin\",\n                subscription: {\n                    plan: \"free\",\n                    isTrial: false\n                }\n            };\n            await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.saveOrganization)(adminOrg);\n            org = adminOrg;\n        }\n        if (!org) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                subscription: {\n                    plan: \"free\",\n                    isTrial: false\n                },\n                isPro: false,\n                isTrial: false\n            });\n        }\n        // Ensure subscription exists (handle legacy data)\n        if (!org.subscription) {\n            org.subscription = {\n                plan: \"free\",\n                isTrial: false\n            };\n        }\n        const isPro = org.subscription.plan === \"pro\" || org.subscription.plan === \"enterprise\";\n        const isExpired = org.subscription.expiresAt ? new Date(org.subscription.expiresAt) < new Date() : false;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            subscription: org.subscription,\n            isPro: isPro && !isExpired,\n            isTrial: org.subscription.isTrial,\n            organization: {\n                id: org.id,\n                name: org.name,\n                type: org.type\n            }\n        });\n    } catch (error) {\n        console.error(\"[Subscription API] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to get subscription\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/subscription - Upgrade organization subscription (demo payment)\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { plan, orgId, cardNumber, expiryDate, cvv, userId, coupon } = body;\n        console.log(\"[Stripe Simulation] \\uD83D\\uDCB3 Processing Payment Intent for org:\", orgId);\n        console.log(\"[Stripe Simulation] \\uD83D\\uDED2 Plan:\", plan, \"Coupon:\", coupon || \"None\");\n        // Simulate real network delay for payment authorization\n        await new Promise((resolve)=>setTimeout(resolve, 2000));\n        // Validate required fields\n        if (!orgId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Organization ID required\"\n            }, {\n                status: 400\n            });\n        }\n        let org = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.findOrganizationById)(orgId);\n        // Auto-create default admin org if missing\n        if (!org && orgId === \"ind-admin\") {\n            console.log(\"[Subscription API] Auto-creating missing default admin org during upgrade\");\n            const adminOrg = {\n                id: \"ind-admin\",\n                name: \"Administrator Workspace\",\n                type: \"individual\",\n                adminUserId: \"admin\",\n                subscription: {\n                    plan: \"free\",\n                    isTrial: false\n                }\n            };\n            await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.saveOrganization)(adminOrg);\n            org = adminOrg;\n        }\n        if (!org) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Organization not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Validate plan\n        if (!plan || ![\n            \"pro_trial\",\n            \"pro_monthly\",\n            \"pro_yearly\",\n            \"enterprise_monthly\",\n            \"enterprise_yearly\"\n        ].includes(plan)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid plan\"\n            }, {\n                status: 400\n            });\n        }\n        // Check for specific coupon validity\n        const couponData = coupon ? _lib_subscription__WEBPACK_IMPORTED_MODULE_2__.COUPONS[coupon] : null;\n        const isFreeWithCoupon = couponData?.discount_percent === 100;\n        // Validate coupon plan restriction\n        if (couponData && couponData.allowed_plans && !couponData.allowed_plans.includes(plan)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Coupon '${coupon}' is not valid for plan '${plan}'`\n            }, {\n                status: 400\n            });\n        }\n        // For paid plans, validate card (demo) - Skip if 100% off coupon applied\n        if (plan !== \"pro_trial\" && !isFreeWithCoupon) {\n            if (!cardNumber || cardNumber.length !== 16) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid card number\"\n                }, {\n                    status: 400\n                });\n            }\n            if (!expiryDate || !expiryDate.match(/^\\d{2}\\/\\d{2}$/)) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid expiry date\"\n                }, {\n                    status: 400\n                });\n            }\n            if (!cvv || cvv.length !== 3) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid CVV\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Calculate expiry\n        let expiresAt = null;\n        const now = new Date();\n        if (plan === \"pro_trial\") {\n            const expiry = new Date(now);\n            expiry.setDate(expiry.getDate() + 30);\n            expiresAt = expiry.toISOString();\n        } else if (plan === \"pro_monthly\" || plan === \"enterprise_monthly\") {\n            const expiry = new Date(now);\n            expiry.setDate(expiry.getDate() + 30);\n            expiresAt = expiry.toISOString();\n        } else if (plan === \"pro_yearly\" || plan === \"enterprise_yearly\") {\n            const expiry = new Date(now);\n            expiry.setFullYear(expiry.getFullYear() + 1);\n            expiresAt = expiry.toISOString();\n        }\n        // Update organization subscription\n        const updated = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.updateOrgSubscription)(orgId, {\n            plan: plan.startsWith(\"enterprise\") ? \"enterprise\" : \"pro\",\n            planType: plan === \"pro_trial\" ? \"trial\" : plan.includes(\"monthly\") ? \"monthly\" : \"yearly\",\n            isTrial: plan === \"pro_trial\",\n            activatedAt: now.toISOString(),\n            expiresAt: expiresAt\n        });\n        if (!updated) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update subscription\"\n            }, {\n                status: 500\n            });\n        }\n        const message = plan === \"pro_trial\" ? `ðŸŽ‰ Free trial activated for \"${org.name}\"! All users now have Pro features for 1 month!` : `ðŸŽ‰ \"${org.name}\" upgraded to Pro! All users now have Pro features!`;\n        console.log(\"[Subscription API]\", message);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message,\n            subscription: updated.subscription,\n            organization: {\n                id: updated.id,\n                name: updated.name,\n                type: updated.type\n            }\n        });\n    } catch (error) {\n        console.error(\"[Subscription API] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Upgrade failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNRyxVQUFVLE1BQU1wRCx3RUFBcUJBLENBQUNLLE9BQU87WUFDL0NNLE1BQU1BLEtBQUswQyxVQUFVLENBQUMsZ0JBQWdCLGVBQWU7WUFDckRDLFVBQVUzQyxTQUFTLGNBQWMsVUFBV0EsS0FBSzJCLFFBQVEsQ0FBQyxhQUFhLFlBQVk7WUFDbkYxQixTQUFTRCxTQUFTO1lBQ2xCNEMsYUFBYVYsSUFBSUksV0FBVztZQUM1QjFCLFdBQVdBO1FBQ2Y7UUFFQSxJQUFJLENBQUM2QixTQUFTO1lBQ1YsT0FBT3RELHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7Z0JBQUVpQixPQUFPO1lBQWdDLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUN2RjtRQUVBLE1BQU02QixVQUFVN0MsU0FBUyxjQUNuQixDQUFDLDZCQUE2QixFQUFFRyxJQUFJSyxJQUFJLENBQUMsK0NBQStDLENBQUMsR0FDekYsQ0FBQyxJQUFJLEVBQUVMLElBQUlLLElBQUksQ0FBQyxtREFBbUQsQ0FBQztRQUUxRUosUUFBUUMsR0FBRyxDQUFDLHNCQUFzQndDO1FBRWxDLE9BQU8xRCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQ3JCZ0QsU0FBUztZQUNURDtZQUNBOUMsY0FBYzBDLFFBQVExQyxZQUFZO1lBQ2xDZSxjQUFjO2dCQUNWUCxJQUFJa0MsUUFBUWxDLEVBQUU7Z0JBQ2RDLE1BQU1pQyxRQUFRakMsSUFBSTtnQkFDbEJDLE1BQU1nQyxRQUFRaEMsSUFBSTtZQUN0QjtRQUNKO0lBQ0osRUFBRSxPQUFPTSxPQUFZO1FBQ2pCWCxRQUFRVyxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPNUIscURBQVlBLENBQUNXLElBQUksQ0FBQztZQUFFaUIsT0FBTztRQUFpQixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUN4RTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvc2RiL3dlYi8uL3NyYy9hcHAvYXBpL3N1YnNjcmlwdGlvbi9yb3V0ZS50cz9iYjAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGZpbmRPcmdhbml6YXRpb25CeUlkLCB1cGRhdGVPcmdTdWJzY3JpcHRpb24sIHNhdmVPcmdhbml6YXRpb24sIE9yZ2FuaXphdGlvbiBhcyBJT3JnYW5pemF0aW9uIH0gZnJvbSAnQC9saWIvb3JnYW5pemF0aW9uJztcclxuaW1wb3J0IHsgZmluZFVzZXJCeUlkIH0gZnJvbSAnQC9saWIvdXNlcnMtc3RvcmUnO1xyXG5pbXBvcnQgeyBDT1VQT05TIH0gZnJvbSAnQC9saWIvc3Vic2NyaXB0aW9uJztcclxuXHJcbi8vIEdFVCAvYXBpL3N1YnNjcmlwdGlvbiAtIEdldCBvcmdhbml6YXRpb24gc3Vic2NyaXB0aW9uIHN0YXR1c1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEdldCBvcmdhbml6YXRpb24gZnJvbSBxdWVyeSBwYXJhbXMgb3IgdXNlclxyXG4gICAgICAgIGNvbnN0IG9yZ0lkID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ29yZ0lkJyk7XHJcblxyXG4gICAgICAgIGlmICghb3JnSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogeyBwbGFuOiAnZnJlZScsIGlzVHJpYWw6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgICAgICBpc1BybzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc1RyaWFsOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBvcmcgPSBhd2FpdCBmaW5kT3JnYW5pemF0aW9uQnlJZChvcmdJZCk7XHJcblxyXG4gICAgICAgIC8vIEF1dG8tY3JlYXRlIGRlZmF1bHQgYWRtaW4gb3JnIGlmIG1pc3NpbmdcclxuICAgICAgICBpZiAoIW9yZyAmJiBvcmdJZCA9PT0gJ2luZC1hZG1pbicpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTdWJzY3JpcHRpb24gQVBJXSBBdXRvLWNyZWF0aW5nIG1pc3NpbmcgZGVmYXVsdCBhZG1pbiBvcmcnKTtcclxuICAgICAgICAgICAgY29uc3QgYWRtaW5Pcmc6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiAnaW5kLWFkbWluJyxcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdBZG1pbmlzdHJhdG9yIFdvcmtzcGFjZScsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5kaXZpZHVhbCcsXHJcbiAgICAgICAgICAgICAgICBhZG1pblVzZXJJZDogJ2FkbWluJyxcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogeyBwbGFuOiAnZnJlZScsIGlzVHJpYWw6IGZhbHNlIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXdhaXQgc2F2ZU9yZ2FuaXphdGlvbihhZG1pbk9yZyk7XHJcbiAgICAgICAgICAgIG9yZyA9IGFkbWluT3JnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFvcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogeyBwbGFuOiAnZnJlZScsIGlzVHJpYWw6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgICAgICBpc1BybzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc1RyaWFsOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVuc3VyZSBzdWJzY3JpcHRpb24gZXhpc3RzIChoYW5kbGUgbGVnYWN5IGRhdGEpXHJcbiAgICAgICAgaWYgKCFvcmcuc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIG9yZy5zdWJzY3JpcHRpb24gPSB7IHBsYW46ICdmcmVlJywgaXNUcmlhbDogZmFsc2UgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlzUHJvID0gb3JnLnN1YnNjcmlwdGlvbi5wbGFuID09PSAncHJvJyB8fCBvcmcuc3Vic2NyaXB0aW9uLnBsYW4gPT09ICdlbnRlcnByaXNlJztcclxuICAgICAgICBjb25zdCBpc0V4cGlyZWQgPSBvcmcuc3Vic2NyaXB0aW9uLmV4cGlyZXNBdFxyXG4gICAgICAgICAgICA/IG5ldyBEYXRlKG9yZy5zdWJzY3JpcHRpb24uZXhwaXJlc0F0KSA8IG5ldyBEYXRlKClcclxuICAgICAgICAgICAgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiBvcmcuc3Vic2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBpc1BybzogaXNQcm8gJiYgIWlzRXhwaXJlZCxcclxuICAgICAgICAgICAgaXNUcmlhbDogb3JnLnN1YnNjcmlwdGlvbi5pc1RyaWFsLFxyXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IHtcclxuICAgICAgICAgICAgICAgIGlkOiBvcmcuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBvcmcubmFtZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IG9yZy50eXBlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdbU3Vic2NyaXB0aW9uIEFQSV0gRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGdldCBzdWJzY3JpcHRpb24nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFBPU1QgL2FwaS9zdWJzY3JpcHRpb24gLSBVcGdyYWRlIG9yZ2FuaXphdGlvbiBzdWJzY3JpcHRpb24gKGRlbW8gcGF5bWVudClcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHsgcGxhbiwgb3JnSWQsIGNhcmROdW1iZXIsIGV4cGlyeURhdGUsIGN2diwgdXNlcklkLCBjb3Vwb24gfSA9IGJvZHk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU3RyaXBlIFNpbXVsYXRpb25dIPCfkrMgUHJvY2Vzc2luZyBQYXltZW50IEludGVudCBmb3Igb3JnOicsIG9yZ0lkKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnW1N0cmlwZSBTaW11bGF0aW9uXSDwn5uSIFBsYW46JywgcGxhbiwgJ0NvdXBvbjonLCBjb3Vwb24gfHwgJ05vbmUnKTtcclxuXHJcbiAgICAgICAgLy8gU2ltdWxhdGUgcmVhbCBuZXR3b3JrIGRlbGF5IGZvciBwYXltZW50IGF1dGhvcml6YXRpb25cclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgICBpZiAoIW9yZ0lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnT3JnYW5pemF0aW9uIElEIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG9yZyA9IGF3YWl0IGZpbmRPcmdhbml6YXRpb25CeUlkKG9yZ0lkKTtcclxuXHJcbiAgICAgICAgLy8gQXV0by1jcmVhdGUgZGVmYXVsdCBhZG1pbiBvcmcgaWYgbWlzc2luZ1xyXG4gICAgICAgIGlmICghb3JnICYmIG9yZ0lkID09PSAnaW5kLWFkbWluJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1N1YnNjcmlwdGlvbiBBUEldIEF1dG8tY3JlYXRpbmcgbWlzc2luZyBkZWZhdWx0IGFkbWluIG9yZyBkdXJpbmcgdXBncmFkZScpO1xyXG4gICAgICAgICAgICBjb25zdCBhZG1pbk9yZzogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdpbmQtYWRtaW4nLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0FkbWluaXN0cmF0b3IgV29ya3NwYWNlJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdpbmRpdmlkdWFsJyxcclxuICAgICAgICAgICAgICAgIGFkbWluVXNlcklkOiAnYWRtaW4nLFxyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB7IHBsYW46ICdmcmVlJywgaXNUcmlhbDogZmFsc2UgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhd2FpdCBzYXZlT3JnYW5pemF0aW9uKGFkbWluT3JnKTtcclxuICAgICAgICAgICAgb3JnID0gYWRtaW5Pcmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIW9yZykge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ09yZ2FuaXphdGlvbiBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSBwbGFuXHJcbiAgICAgICAgaWYgKCFwbGFuIHx8ICFbJ3Byb190cmlhbCcsICdwcm9fbW9udGhseScsICdwcm9feWVhcmx5JywgJ2VudGVycHJpc2VfbW9udGhseScsICdlbnRlcnByaXNlX3llYXJseSddLmluY2x1ZGVzKHBsYW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBwbGFuJyB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGNvdXBvbiB2YWxpZGl0eVxyXG4gICAgICAgIGNvbnN0IGNvdXBvbkRhdGEgPSBjb3Vwb24gPyBDT1VQT05TW2NvdXBvbiBhcyBrZXlvZiB0eXBlb2YgQ09VUE9OU10gOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGlzRnJlZVdpdGhDb3Vwb24gPSBjb3Vwb25EYXRhPy5kaXNjb3VudF9wZXJjZW50ID09PSAxMDA7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIGNvdXBvbiBwbGFuIHJlc3RyaWN0aW9uXHJcbiAgICAgICAgaWYgKGNvdXBvbkRhdGEgJiYgY291cG9uRGF0YS5hbGxvd2VkX3BsYW5zICYmICFjb3Vwb25EYXRhLmFsbG93ZWRfcGxhbnMuaW5jbHVkZXMocGxhbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBgQ291cG9uICcke2NvdXBvbn0nIGlzIG5vdCB2YWxpZCBmb3IgcGxhbiAnJHtwbGFufSdgXHJcbiAgICAgICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3IgcGFpZCBwbGFucywgdmFsaWRhdGUgY2FyZCAoZGVtbykgLSBTa2lwIGlmIDEwMCUgb2ZmIGNvdXBvbiBhcHBsaWVkXHJcbiAgICAgICAgaWYgKHBsYW4gIT09ICdwcm9fdHJpYWwnICYmICFpc0ZyZWVXaXRoQ291cG9uKSB7XHJcbiAgICAgICAgICAgIGlmICghY2FyZE51bWJlciB8fCBjYXJkTnVtYmVyLmxlbmd0aCAhPT0gMTYpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBjYXJkIG51bWJlcicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWV4cGlyeURhdGUgfHwgIWV4cGlyeURhdGUubWF0Y2goL15cXGR7Mn1cXC9cXGR7Mn0kLykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBleHBpcnkgZGF0ZScgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWN2diB8fCBjdnYubGVuZ3RoICE9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgQ1ZWJyB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgZXhwaXJ5XHJcbiAgICAgICAgbGV0IGV4cGlyZXNBdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBpZiAocGxhbiA9PT0gJ3Byb190cmlhbCcpIHtcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IERhdGUobm93KTtcclxuICAgICAgICAgICAgZXhwaXJ5LnNldERhdGUoZXhwaXJ5LmdldERhdGUoKSArIDMwKTtcclxuICAgICAgICAgICAgZXhwaXJlc0F0ID0gZXhwaXJ5LnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwbGFuID09PSAncHJvX21vbnRobHknIHx8IHBsYW4gPT09ICdlbnRlcnByaXNlX21vbnRobHknKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBEYXRlKG5vdyk7XHJcbiAgICAgICAgICAgIGV4cGlyeS5zZXREYXRlKGV4cGlyeS5nZXREYXRlKCkgKyAzMCk7XHJcbiAgICAgICAgICAgIGV4cGlyZXNBdCA9IGV4cGlyeS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGxhbiA9PT0gJ3Byb195ZWFybHknIHx8IHBsYW4gPT09ICdlbnRlcnByaXNlX3llYXJseScpIHtcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IERhdGUobm93KTtcclxuICAgICAgICAgICAgZXhwaXJ5LnNldEZ1bGxZZWFyKGV4cGlyeS5nZXRGdWxsWWVhcigpICsgMSk7XHJcbiAgICAgICAgICAgIGV4cGlyZXNBdCA9IGV4cGlyeS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIG9yZ2FuaXphdGlvbiBzdWJzY3JpcHRpb25cclxuICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgdXBkYXRlT3JnU3Vic2NyaXB0aW9uKG9yZ0lkLCB7XHJcbiAgICAgICAgICAgIHBsYW46IHBsYW4uc3RhcnRzV2l0aCgnZW50ZXJwcmlzZScpID8gJ2VudGVycHJpc2UnIDogJ3BybycsXHJcbiAgICAgICAgICAgIHBsYW5UeXBlOiBwbGFuID09PSAncHJvX3RyaWFsJyA/ICd0cmlhbCcgOiAocGxhbi5pbmNsdWRlcygnbW9udGhseScpID8gJ21vbnRobHknIDogJ3llYXJseScpLFxyXG4gICAgICAgICAgICBpc1RyaWFsOiBwbGFuID09PSAncHJvX3RyaWFsJyxcclxuICAgICAgICAgICAgYWN0aXZhdGVkQXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBleHBpcmVzQXQ6IGV4cGlyZXNBdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXVwZGF0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBwbGFuID09PSAncHJvX3RyaWFsJ1xyXG4gICAgICAgICAgICA/IGDwn46JIEZyZWUgdHJpYWwgYWN0aXZhdGVkIGZvciBcIiR7b3JnLm5hbWV9XCIhIEFsbCB1c2VycyBub3cgaGF2ZSBQcm8gZmVhdHVyZXMgZm9yIDEgbW9udGghYFxyXG4gICAgICAgICAgICA6IGDwn46JIFwiJHtvcmcubmFtZX1cIiB1cGdyYWRlZCB0byBQcm8hIEFsbCB1c2VycyBub3cgaGF2ZSBQcm8gZmVhdHVyZXMhYDtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tTdWJzY3JpcHRpb24gQVBJXScsIG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb246IHVwZGF0ZWQuc3Vic2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IHtcclxuICAgICAgICAgICAgICAgIGlkOiB1cGRhdGVkLmlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdXBkYXRlZC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogdXBkYXRlZC50eXBlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdbU3Vic2NyaXB0aW9uIEFQSV0gRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVXBncmFkZSBmYWlsZWQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImZpbmRPcmdhbml6YXRpb25CeUlkIiwidXBkYXRlT3JnU3Vic2NyaXB0aW9uIiwic2F2ZU9yZ2FuaXphdGlvbiIsIkNPVVBPTlMiLCJHRVQiLCJyZXF1ZXN0Iiwib3JnSWQiLCJuZXh0VXJsIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwianNvbiIsInN1YnNjcmlwdGlvbiIsInBsYW4iLCJpc1RyaWFsIiwiaXNQcm8iLCJvcmciLCJjb25zb2xlIiwibG9nIiwiYWRtaW5PcmciLCJpZCIsIm5hbWUiLCJ0eXBlIiwiYWRtaW5Vc2VySWQiLCJpc0V4cGlyZWQiLCJleHBpcmVzQXQiLCJEYXRlIiwib3JnYW5pemF0aW9uIiwiZXJyb3IiLCJzdGF0dXMiLCJQT1NUIiwiYm9keSIsImNhcmROdW1iZXIiLCJleHBpcnlEYXRlIiwiY3Z2IiwidXNlcklkIiwiY291cG9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiaW5jbHVkZXMiLCJjb3Vwb25EYXRhIiwiaXNGcmVlV2l0aENvdXBvbiIsImRpc2NvdW50X3BlcmNlbnQiLCJhbGxvd2VkX3BsYW5zIiwibGVuZ3RoIiwibWF0Y2giLCJub3ciLCJleHBpcnkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRvSVNPU3RyaW5nIiwic2V0RnVsbFllYXIiLCJnZXRGdWxsWWVhciIsInVwZGF0ZWQiLCJzdGFydHNXaXRoIiwicGxhblR5cGUiLCJhY3RpdmF0ZWRBdCIsIm1lc3NhZ2UiLCJzdWNjZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/subscription/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Get MongoDB URI from environment variable (with fallback for development)\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb+srv://bosdb:vY0xUQxLuOzNzHv3@bosdb.mvxsw5l.mongodb.net/bosdb?appName=BosDB\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    // If already connected, return the connection\n    if (cached.conn) {\n        return cached.conn;\n    }\n    // If no promise exists, create a new connection\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            serverSelectionTimeoutMS: 10000,\n            socketTimeoutMS: 45000,\n            family: 4\n        };\n        console.log(\"[MongoDB] Connecting to MongoDB Atlas...\");\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"[MongoDB] âœ… Connected to MongoDB Atlas successfully!\");\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        console.error(\"[MongoDB] âŒ Connection failed:\", e);\n        throw e;\n    }\n    return cached.conn;\n}\n// Connect immediately when this module is imported (on project start)\n// This ensures MongoDB is connected as soon as possible\nconnectDB().catch((err)=>{\n    console.error(\"[MongoDB] Initial connection failed:\", err.message);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNnQztBQUVoQyw0RUFBNEU7QUFDNUUsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXLElBQUk7QUFFL0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2QsTUFBTSxJQUFJRyxNQUFNO0FBQ3BCO0FBRUE7Ozs7Q0FJQyxHQUNELElBQUlDLFNBQVMsT0FBZ0JMLFFBQVE7QUFFckMsSUFBSSxDQUFDSyxRQUFRO0lBQ1RBLFNBQVMsT0FBZ0JMLFFBQVEsR0FBRztRQUFFTyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUNwRTtBQUVBLGVBQWVDO0lBQ1gsOENBQThDO0lBQzlDLElBQUlKLE9BQU9FLElBQUksRUFBRTtRQUNiLE9BQU9GLE9BQU9FLElBQUk7SUFDdEI7SUFFQSxnREFBZ0Q7SUFDaEQsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDakIsTUFBTUUsT0FBTztZQUNUQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtZQUMxQkMsaUJBQWlCO1lBQ2pCQyxRQUFRO1FBQ1o7UUFFQUMsUUFBUUMsR0FBRyxDQUFDO1FBRVpYLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFTLE1BQU1RLElBQUksQ0FBQyxDQUFDbEI7WUFDdkRlLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9oQjtRQUNYO0lBQ0o7SUFFQSxJQUFJO1FBQ0FLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3RDLEVBQUUsT0FBT1csR0FBRztRQUNSZCxPQUFPRyxPQUFPLEdBQUc7UUFDakJPLFFBQVFLLEtBQUssQ0FBQyxrQ0FBa0NEO1FBQ2hELE1BQU1BO0lBQ1Y7SUFFQSxPQUFPZCxPQUFPRSxJQUFJO0FBQ3RCO0FBRUEsc0VBQXNFO0FBQ3RFLHdEQUF3RDtBQUN4REUsWUFBWVksS0FBSyxDQUFDQyxDQUFBQTtJQUNkUCxRQUFRSyxLQUFLLENBQUMsd0NBQXdDRSxJQUFJQyxPQUFPO0FBQ3JFO0FBRUEsaUVBQWVkLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9zZGIvd2ViLy4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuLy8gR2V0IE1vbmdvREIgVVJJIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGUgKHdpdGggZmFsbGJhY2sgZm9yIGRldmVsb3BtZW50KVxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiK3NydjovL2Jvc2RiOnZZMHhVUXhMdU96TnpIdjNAYm9zZGIubXZ4c3c1bC5tb25nb2RiLm5ldC9ib3NkYj9hcHBOYW1lPUJvc0RCJztcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5zaWRlIC5lbnYubG9jYWwnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdsb2JhbCBpcyB1c2VkIGhlcmUgdG8gbWFpbnRhaW4gYSBjYWNoZWQgY29ubmVjdGlvbiBhY3Jvc3MgaG90IHJlbG9hZHNcclxuICogaW4gZGV2ZWxvcG1lbnQuIFRoaXMgcHJldmVudHMgY29ubmVjdGlvbnMgZ3Jvd2luZyBleHBvbmVudGlhbGx5XHJcbiAqIGR1cmluZyBBUEkgUm91dGUgdXNhZ2UuXHJcbiAqL1xyXG5sZXQgY2FjaGVkID0gKGdsb2JhbCBhcyBhbnkpLm1vbmdvb3NlO1xyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICAgIGNhY2hlZCA9IChnbG9iYWwgYXMgYW55KS5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0REIoKSB7XHJcbiAgICAvLyBJZiBhbHJlYWR5IGNvbm5lY3RlZCwgcmV0dXJuIHRoZSBjb25uZWN0aW9uXHJcbiAgICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgICAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgbm8gcHJvbWlzZSBleGlzdHMsIGNyZWF0ZSBhIG5ldyBjb25uZWN0aW9uXHJcbiAgICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IHtcclxuICAgICAgICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDEwMDAwLCAvLyAxMCBzZWNvbmQgdGltZW91dFxyXG4gICAgICAgICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLFxyXG4gICAgICAgICAgICBmYW1pbHk6IDQsIC8vIFVzZSBJUHY0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tNb25nb0RCXSBDb25uZWN0aW5nIHRvIE1vbmdvREIgQXRsYXMuLi4nKTtcclxuXHJcbiAgICAgICAgY2FjaGVkLnByb21pc2UgPSBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW01vbmdvREJdIOKchSBDb25uZWN0ZWQgdG8gTW9uZ29EQiBBdGxhcyBzdWNjZXNzZnVsbHkhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb25nb29zZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tNb25nb0RCXSDinYwgQ29ubmVjdGlvbiBmYWlsZWQ6JywgZSk7XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuXHJcbi8vIENvbm5lY3QgaW1tZWRpYXRlbHkgd2hlbiB0aGlzIG1vZHVsZSBpcyBpbXBvcnRlZCAob24gcHJvamVjdCBzdGFydClcclxuLy8gVGhpcyBlbnN1cmVzIE1vbmdvREIgaXMgY29ubmVjdGVkIGFzIHNvb24gYXMgcG9zc2libGVcclxuY29ubmVjdERCKCkuY2F0Y2goZXJyID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tNb25nb0RCXSBJbml0aWFsIGNvbm5lY3Rpb24gZmFpbGVkOicsIGVyci5tZXNzYWdlKTtcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0REI7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJjb25uZWN0REIiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJmYW1pbHkiLCJjb25zb2xlIiwibG9nIiwiY29ubmVjdCIsInRoZW4iLCJlIiwiZXJyb3IiLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/organization.ts":
/*!*********************************!*\
  !*** ./src/lib/organization.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   COMMON_EMAIL_DOMAINS: () => (/* binding */ COMMON_EMAIL_DOMAINS),\n/* harmony export */   extractDomain: () => (/* binding */ extractDomain),\n/* harmony export */   findOrganizationByDomain: () => (/* binding */ findOrganizationByDomain),\n/* harmony export */   findOrganizationById: () => (/* binding */ findOrganizationById),\n/* harmony export */   getOrCreateOrgForUser: () => (/* binding */ getOrCreateOrgForUser),\n/* harmony export */   getOrganizationById: () => (/* binding */ getOrganizationById),\n/* harmony export */   saveOrganization: () => (/* binding */ saveOrganization),\n/* harmony export */   updateOrgSubscription: () => (/* binding */ updateOrgSubscription),\n/* harmony export */   updateOrganization: () => (/* binding */ updateOrganization)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _models_Organization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/Organization */ \"(rsc)/./src/models/Organization.ts\");\n// Organization management for multi-tenant BosDB\n// Supports Individual (single user) and Enterprise (company) modes\n\n\nconst COMMON_EMAIL_DOMAINS = [\n    \"gmail.com\",\n    \"yahoo.com\",\n    \"outlook.com\",\n    \"hotmail.com\",\n    \"icloud.com\"\n];\n// Helper to ensure DB is connected\nasync function ensureDB() {\n    await (0,_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n}\nasync function getOrganizationById(id) {\n    await ensureDB();\n    const org = await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n        id\n    }).lean();\n    return org;\n}\n// Alias for backward compatibility\nconst findOrganizationById = getOrganizationById;\nasync function findOrganizationByDomain(domain) {\n    await ensureDB();\n    // For enterprise organizations, the 'id' field is often the domain itself.\n    // Also check the 'domain' field explicitly for robustness since we might have migrated data or different schemas\n    const org = await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n        $or: [\n            {\n                id: domain,\n                type: \"enterprise\"\n            },\n            {\n                domain: domain.toLowerCase(),\n                type: \"enterprise\"\n            } // Assuming 'domain' field exists in schema or is flexible\n        ]\n    }).lean();\n    return org;\n}\nasync function saveOrganization(org) {\n    await ensureDB();\n    // Using updateOne with upsert to handle both create and update efficiently\n    if (!org.id) throw new Error(\"Organization ID is required for saving\");\n    await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n        id: org.id\n    }, {\n        $set: org\n    }, {\n        upsert: true\n    });\n}\nasync function updateOrganization(orgId, updates) {\n    await ensureDB();\n    await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n        id: orgId\n    }, {\n        $set: {\n            ...updates,\n            updatedAt: new Date()\n        }\n    });\n}\nfunction extractDomain(email) {\n    const parts = email.split(\"@\");\n    if (parts.length !== 2) return \"\";\n    return parts[1].toLowerCase();\n}\nasync function getOrCreateOrgForUser(email, accountType) {\n    await ensureDB();\n    const domain = extractDomain(email);\n    let org = null;\n    let isNew = false;\n    if (accountType === \"individual\") {\n        // Individual: Personal Org (e.g., ind-username)\n        const userId = email.split(\"@\")[0];\n        const orgId = `ind-${userId}`;\n        org = await getOrganizationById(orgId);\n        if (!org) {\n            // Define new org object\n            // Use 'any' cast if strict type checking complains about missing optional fields during creation, \n            // but ideally strictly match IOrganization\n            const newOrg = {\n                id: orgId,\n                name: `${userId}'s Workspace`,\n                type: \"individual\",\n                domain: \"personal\",\n                adminUserId: userId,\n                subscription: {\n                    plan: \"free\",\n                    isTrial: false\n                },\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            // Create via Mongoose model directly for better validation\n            await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(newOrg);\n            org = await getOrganizationById(orgId);\n            isNew = true;\n        }\n    } else {\n        // Enterprise: Domain-based Org\n        const isCommon = COMMON_EMAIL_DOMAINS.includes(domain);\n        if (isCommon) {\n            const userId = email.split(\"@\")[0];\n            const orgId = `ind-${userId}`;\n            org = await getOrganizationById(orgId);\n            if (!org) {\n                const newOrg = {\n                    id: orgId,\n                    name: `${userId}'s Personal Workspace`,\n                    type: \"individual\",\n                    domain: \"personal\",\n                    adminUserId: userId,\n                    subscription: {\n                        plan: \"free\",\n                        isTrial: false\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                };\n                await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(newOrg);\n                org = await getOrganizationById(orgId);\n                isNew = true;\n            }\n        } else {\n            // Real Enterprise Domain\n            org = await findOrganizationByDomain(domain);\n            if (!org) {\n                const companyName = domain.split(\".\")[0];\n                const newOrg = {\n                    id: domain,\n                    name: companyName.charAt(0).toUpperCase() + companyName.slice(1),\n                    type: \"enterprise\",\n                    domain: domain,\n                    adminUserId: null,\n                    subscription: {\n                        plan: \"free\",\n                        isTrial: true,\n                        planType: \"trial\"\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date()\n                };\n                await _models_Organization__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(newOrg);\n                org = await getOrganizationById(domain);\n                isNew = true;\n            }\n        }\n    }\n    if (!org) throw new Error(\"Failed to create org\");\n    return {\n        org,\n        isNew\n    };\n}\n// Update organization subscription\nasync function updateOrgSubscription(orgId, subscription) {\n    const org = await getOrganizationById(orgId);\n    if (!org) return null;\n    // Merge existing subscription with updates\n    // Use 'any' to avoid strict Partial<> issues if needed, but clean TS is better\n    const currentSub = org.subscription || {};\n    const updatedSubscription = {\n        ...currentSub,\n        ...subscription\n    };\n    await updateOrganization(orgId, {\n        subscription: updatedSubscription\n    });\n    return getOrganizationById(orgId);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQ2hDcUIsUUFBUTtZQUNaO1FBQ0o7SUFDSjtJQUVBLElBQUksQ0FBQzFCLEtBQUssTUFBTSxJQUFJVSxNQUFNO0lBRTFCLE9BQU87UUFBRVY7UUFBSzBCO0lBQU07QUFDeEI7QUFFQSxtQ0FBbUM7QUFDNUIsZUFBZWlCLHNCQUNsQjVCLEtBQWEsRUFDYmdCLFlBQW1DO0lBRW5DLE1BQU0vQixNQUFNLE1BQU1GLG9CQUFvQmlCO0lBQ3RDLElBQUksQ0FBQ2YsS0FBSyxPQUFPO0lBRWpCLDJDQUEyQztJQUMzQywrRUFBK0U7SUFDL0UsTUFBTTRDLGFBQWEsSUFBYWIsWUFBWSxJQUFJLENBQUM7SUFDakQsTUFBTWMsc0JBQXNCO1FBQUUsR0FBR0QsVUFBVTtRQUFFLEdBQUdiLFlBQVk7SUFBQztJQUU3RCxNQUFNakIsbUJBQW1CQyxPQUFPO1FBQUVnQixjQUFjYztJQUFvQjtJQUVwRSxPQUFPL0Msb0JBQW9CaUI7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9zZGIvd2ViLy4vc3JjL2xpYi9vcmdhbml6YXRpb24udHM/MWRkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gT3JnYW5pemF0aW9uIG1hbmFnZW1lbnQgZm9yIG11bHRpLXRlbmFudCBCb3NEQlxyXG4vLyBTdXBwb3J0cyBJbmRpdmlkdWFsIChzaW5nbGUgdXNlcikgYW5kIEVudGVycHJpc2UgKGNvbXBhbnkpIG1vZGVzXHJcblxyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJy4vZGInO1xyXG5pbXBvcnQgT3JnYW5pemF0aW9uLCB7IElPcmdhbml6YXRpb24gfSBmcm9tICdAL21vZGVscy9Pcmdhbml6YXRpb24nO1xyXG5cclxuZXhwb3J0IHR5cGUgeyBJT3JnYW5pemF0aW9uIGFzIE9yZ2FuaXphdGlvbiB9O1xyXG5leHBvcnQgdHlwZSBPcmdhbml6YXRpb25UeXBlID0gJ2luZGl2aWR1YWwnIHwgJ2VudGVycHJpc2UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpcHRpb24ge1xyXG4gICAgcGxhbjogJ2ZyZWUnIHwgJ3BybycgfCAnZW50ZXJwcmlzZSc7XHJcbiAgICBwbGFuVHlwZT86ICd0cmlhbCcgfCAnbW9udGhseScgfCAneWVhcmx5JztcclxuICAgIGlzVHJpYWw6IGJvb2xlYW47XHJcbiAgICBhY3RpdmF0ZWRBdD86IHN0cmluZztcclxuICAgIGV4cGlyZXNBdD86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDT01NT05fRU1BSUxfRE9NQUlOUyA9IFsnZ21haWwuY29tJywgJ3lhaG9vLmNvbScsICdvdXRsb29rLmNvbScsICdob3RtYWlsLmNvbScsICdpY2xvdWQuY29tJ107XHJcblxyXG4vLyBIZWxwZXIgdG8gZW5zdXJlIERCIGlzIGNvbm5lY3RlZFxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVEQigpIHtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JnYW5pemF0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxJT3JnYW5pemF0aW9uIHwgbnVsbD4ge1xyXG4gICAgYXdhaXQgZW5zdXJlREIoKTtcclxuICAgIGNvbnN0IG9yZyA9IGF3YWl0IE9yZ2FuaXphdGlvbi5maW5kT25lKHsgaWQgfSkubGVhbigpO1xyXG4gICAgcmV0dXJuIG9yZyBhcyBJT3JnYW5pemF0aW9uIHwgbnVsbDtcclxufVxyXG5cclxuLy8gQWxpYXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuZXhwb3J0IGNvbnN0IGZpbmRPcmdhbml6YXRpb25CeUlkID0gZ2V0T3JnYW5pemF0aW9uQnlJZDtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kT3JnYW5pemF0aW9uQnlEb21haW4oZG9tYWluOiBzdHJpbmcpOiBQcm9taXNlPElPcmdhbml6YXRpb24gfCBudWxsPiB7XHJcbiAgICBhd2FpdCBlbnN1cmVEQigpO1xyXG4gICAgLy8gRm9yIGVudGVycHJpc2Ugb3JnYW5pemF0aW9ucywgdGhlICdpZCcgZmllbGQgaXMgb2Z0ZW4gdGhlIGRvbWFpbiBpdHNlbGYuXHJcbiAgICAvLyBBbHNvIGNoZWNrIHRoZSAnZG9tYWluJyBmaWVsZCBleHBsaWNpdGx5IGZvciByb2J1c3RuZXNzIHNpbmNlIHdlIG1pZ2h0IGhhdmUgbWlncmF0ZWQgZGF0YSBvciBkaWZmZXJlbnQgc2NoZW1hc1xyXG4gICAgY29uc3Qgb3JnID0gYXdhaXQgT3JnYW5pemF0aW9uLmZpbmRPbmUoe1xyXG4gICAgICAgICRvcjogW1xyXG4gICAgICAgICAgICB7IGlkOiBkb21haW4sIHR5cGU6ICdlbnRlcnByaXNlJyB9LFxyXG4gICAgICAgICAgICB7IGRvbWFpbjogZG9tYWluLnRvTG93ZXJDYXNlKCksIHR5cGU6ICdlbnRlcnByaXNlJyB9IC8vIEFzc3VtaW5nICdkb21haW4nIGZpZWxkIGV4aXN0cyBpbiBzY2hlbWEgb3IgaXMgZmxleGlibGVcclxuICAgICAgICBdXHJcbiAgICB9KS5sZWFuKCk7XHJcbiAgICByZXR1cm4gb3JnIGFzIElPcmdhbml6YXRpb24gfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZU9yZ2FuaXphdGlvbihvcmc6IFBhcnRpYWw8SU9yZ2FuaXphdGlvbj4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IGVuc3VyZURCKCk7XHJcbiAgICAvLyBVc2luZyB1cGRhdGVPbmUgd2l0aCB1cHNlcnQgdG8gaGFuZGxlIGJvdGggY3JlYXRlIGFuZCB1cGRhdGUgZWZmaWNpZW50bHlcclxuICAgIGlmICghb3JnLmlkKSB0aHJvdyBuZXcgRXJyb3IoXCJPcmdhbml6YXRpb24gSUQgaXMgcmVxdWlyZWQgZm9yIHNhdmluZ1wiKTtcclxuXHJcbiAgICBhd2FpdCBPcmdhbml6YXRpb24udXBkYXRlT25lKFxyXG4gICAgICAgIHsgaWQ6IG9yZy5pZCB9LFxyXG4gICAgICAgIHsgJHNldDogb3JnIH0sXHJcbiAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9yZ2FuaXphdGlvbihvcmdJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPElPcmdhbml6YXRpb24+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCBlbnN1cmVEQigpO1xyXG4gICAgYXdhaXQgT3JnYW5pemF0aW9uLnVwZGF0ZU9uZShcclxuICAgICAgICB7IGlkOiBvcmdJZCB9LFxyXG4gICAgICAgIHsgJHNldDogeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfSB9XHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdERvbWFpbihlbWFpbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHBhcnRzID0gZW1haWwuc3BsaXQoJ0AnKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDIpIHJldHVybiAnJztcclxuICAgIHJldHVybiBwYXJ0c1sxXS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVPcmdGb3JVc2VyKGVtYWlsOiBzdHJpbmcsIGFjY291bnRUeXBlOiAnaW5kaXZpZHVhbCcgfCAnZW50ZXJwcmlzZScpOiBQcm9taXNlPHsgb3JnOiBJT3JnYW5pemF0aW9uLCBpc05ldzogYm9vbGVhbiB9PiB7XHJcbiAgICBhd2FpdCBlbnN1cmVEQigpO1xyXG4gICAgY29uc3QgZG9tYWluID0gZXh0cmFjdERvbWFpbihlbWFpbCk7XHJcblxyXG4gICAgbGV0IG9yZzogSU9yZ2FuaXphdGlvbiB8IG51bGwgPSBudWxsO1xyXG4gICAgbGV0IGlzTmV3ID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKGFjY291bnRUeXBlID09PSAnaW5kaXZpZHVhbCcpIHtcclxuICAgICAgICAvLyBJbmRpdmlkdWFsOiBQZXJzb25hbCBPcmcgKGUuZy4sIGluZC11c2VybmFtZSlcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBlbWFpbC5zcGxpdCgnQCcpWzBdO1xyXG4gICAgICAgIGNvbnN0IG9yZ0lkID0gYGluZC0ke3VzZXJJZH1gO1xyXG5cclxuICAgICAgICBvcmcgPSBhd2FpdCBnZXRPcmdhbml6YXRpb25CeUlkKG9yZ0lkKTtcclxuXHJcbiAgICAgICAgaWYgKCFvcmcpIHtcclxuICAgICAgICAgICAgLy8gRGVmaW5lIG5ldyBvcmcgb2JqZWN0XHJcbiAgICAgICAgICAgIC8vIFVzZSAnYW55JyBjYXN0IGlmIHN0cmljdCB0eXBlIGNoZWNraW5nIGNvbXBsYWlucyBhYm91dCBtaXNzaW5nIG9wdGlvbmFsIGZpZWxkcyBkdXJpbmcgY3JlYXRpb24sIFxyXG4gICAgICAgICAgICAvLyBidXQgaWRlYWxseSBzdHJpY3RseSBtYXRjaCBJT3JnYW5pemF0aW9uXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld09yZyA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBvcmdJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGAke3VzZXJJZH0ncyBXb3Jrc3BhY2VgLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2luZGl2aWR1YWwnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICAgICAgZG9tYWluOiAncGVyc29uYWwnLFxyXG4gICAgICAgICAgICAgICAgYWRtaW5Vc2VySWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogeyBwbGFuOiAnZnJlZScgYXMgY29uc3QsIGlzVHJpYWw6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB2aWEgTW9uZ29vc2UgbW9kZWwgZGlyZWN0bHkgZm9yIGJldHRlciB2YWxpZGF0aW9uXHJcbiAgICAgICAgICAgIGF3YWl0IE9yZ2FuaXphdGlvbi5jcmVhdGUobmV3T3JnKTtcclxuICAgICAgICAgICAgb3JnID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uQnlJZChvcmdJZCk7XHJcbiAgICAgICAgICAgIGlzTmV3ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEVudGVycHJpc2U6IERvbWFpbi1iYXNlZCBPcmdcclxuICAgICAgICBjb25zdCBpc0NvbW1vbiA9IENPTU1PTl9FTUFJTF9ET01BSU5TLmluY2x1ZGVzKGRvbWFpbik7XHJcblxyXG4gICAgICAgIGlmIChpc0NvbW1vbikge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBlbWFpbC5zcGxpdCgnQCcpWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBvcmdJZCA9IGBpbmQtJHt1c2VySWR9YDtcclxuICAgICAgICAgICAgb3JnID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uQnlJZChvcmdJZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW9yZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBvcmdJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHt1c2VySWR9J3MgUGVyc29uYWwgV29ya3NwYWNlYCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5kaXZpZHVhbCcgYXMgY29uc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiAncGVyc29uYWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkbWluVXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiB7IHBsYW46ICdmcmVlJyBhcyBjb25zdCwgaXNUcmlhbDogZmFsc2UgfSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgT3JnYW5pemF0aW9uLmNyZWF0ZShuZXdPcmcpO1xyXG4gICAgICAgICAgICAgICAgb3JnID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uQnlJZChvcmdJZCk7XHJcbiAgICAgICAgICAgICAgICBpc05ldyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZWFsIEVudGVycHJpc2UgRG9tYWluXHJcbiAgICAgICAgICAgIG9yZyA9IGF3YWl0IGZpbmRPcmdhbml6YXRpb25CeURvbWFpbihkb21haW4pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFvcmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBhbnlOYW1lID0gZG9tYWluLnNwbGl0KCcuJylbMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPcmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGRvbWFpbixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb21wYW55TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNvbXBhbnlOYW1lLnNsaWNlKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbnRlcnByaXNlJyBhcyBjb25zdCxcclxuICAgICAgICAgICAgICAgICAgICBkb21haW46IGRvbWFpbixcclxuICAgICAgICAgICAgICAgICAgICBhZG1pblVzZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHsgcGxhbjogJ2ZyZWUnIGFzIGNvbnN0LCBpc1RyaWFsOiB0cnVlLCBwbGFuVHlwZTogJ3RyaWFsJyBhcyBjb25zdCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBPcmdhbml6YXRpb24uY3JlYXRlKG5ld09yZyk7XHJcbiAgICAgICAgICAgICAgICBvcmcgPSBhd2FpdCBnZXRPcmdhbml6YXRpb25CeUlkKGRvbWFpbik7XHJcbiAgICAgICAgICAgICAgICBpc05ldyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFvcmcpIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgb3JnXCIpO1xyXG5cclxuICAgIHJldHVybiB7IG9yZywgaXNOZXcgfTtcclxufVxyXG5cclxuLy8gVXBkYXRlIG9yZ2FuaXphdGlvbiBzdWJzY3JpcHRpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9yZ1N1YnNjcmlwdGlvbihcclxuICAgIG9yZ0lkOiBzdHJpbmcsXHJcbiAgICBzdWJzY3JpcHRpb246IFBhcnRpYWw8U3Vic2NyaXB0aW9uPlxyXG4pOiBQcm9taXNlPElPcmdhbml6YXRpb24gfCBudWxsPiB7XHJcbiAgICBjb25zdCBvcmcgPSBhd2FpdCBnZXRPcmdhbml6YXRpb25CeUlkKG9yZ0lkKTtcclxuICAgIGlmICghb3JnKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAvLyBNZXJnZSBleGlzdGluZyBzdWJzY3JpcHRpb24gd2l0aCB1cGRhdGVzXHJcbiAgICAvLyBVc2UgJ2FueScgdG8gYXZvaWQgc3RyaWN0IFBhcnRpYWw8PiBpc3N1ZXMgaWYgbmVlZGVkLCBidXQgY2xlYW4gVFMgaXMgYmV0dGVyXHJcbiAgICBjb25zdCBjdXJyZW50U3ViID0gKG9yZyBhcyBhbnkpLnN1YnNjcmlwdGlvbiB8fCB7fTtcclxuICAgIGNvbnN0IHVwZGF0ZWRTdWJzY3JpcHRpb24gPSB7IC4uLmN1cnJlbnRTdWIsIC4uLnN1YnNjcmlwdGlvbiB9O1xyXG5cclxuICAgIGF3YWl0IHVwZGF0ZU9yZ2FuaXphdGlvbihvcmdJZCwgeyBzdWJzY3JpcHRpb246IHVwZGF0ZWRTdWJzY3JpcHRpb24gfSBhcyBhbnkpO1xyXG5cclxuICAgIHJldHVybiBnZXRPcmdhbml6YXRpb25CeUlkKG9yZ0lkKTtcclxufVxyXG4iXSwibmFtZXMiOlsiY29ubmVjdERCIiwiT3JnYW5pemF0aW9uIiwiQ09NTU9OX0VNQUlMX0RPTUFJTlMiLCJlbnN1cmVEQiIsImdldE9yZ2FuaXphdGlvbkJ5SWQiLCJpZCIsIm9yZyIsImZpbmRPbmUiLCJsZWFuIiwiZmluZE9yZ2FuaXphdGlvbkJ5SWQiLCJmaW5kT3JnYW5pemF0aW9uQnlEb21haW4iLCJkb21haW4iLCIkb3IiLCJ0eXBlIiwidG9Mb3dlckNhc2UiLCJzYXZlT3JnYW5pemF0aW9uIiwiRXJyb3IiLCJ1cGRhdGVPbmUiLCIkc2V0IiwidXBzZXJ0IiwidXBkYXRlT3JnYW5pemF0aW9uIiwib3JnSWQiLCJ1cGRhdGVzIiwidXBkYXRlZEF0IiwiRGF0ZSIsImV4dHJhY3REb21haW4iLCJlbWFpbCIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJnZXRPckNyZWF0ZU9yZ0ZvclVzZXIiLCJhY2NvdW50VHlwZSIsImlzTmV3IiwidXNlcklkIiwibmV3T3JnIiwibmFtZSIsImFkbWluVXNlcklkIiwic3Vic2NyaXB0aW9uIiwicGxhbiIsImlzVHJpYWwiLCJjcmVhdGVkQXQiLCJjcmVhdGUiLCJpc0NvbW1vbiIsImluY2x1ZGVzIiwiY29tcGFueU5hbWUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwicGxhblR5cGUiLCJ1cGRhdGVPcmdTdWJzY3JpcHRpb24iLCJjdXJyZW50U3ViIiwidXBkYXRlZFN1YnNjcmlwdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/organization.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/subscription.ts":
/*!*********************************!*\
  !*** ./src/lib/subscription.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   COUPONS: () => (/* binding */ COUPONS),\n/* harmony export */   FREE_DATABASE_TYPES: () => (/* binding */ FREE_DATABASE_TYPES),\n/* harmony export */   FREE_FEATURES: () => (/* binding */ FREE_FEATURES),\n/* harmony export */   PRICING: () => (/* binding */ PRICING),\n/* harmony export */   PRO_FEATURES: () => (/* binding */ PRO_FEATURES),\n/* harmony export */   calculateDiscountedPrice: () => (/* binding */ calculateDiscountedPrice),\n/* harmony export */   canUseFeature: () => (/* binding */ canUseFeature),\n/* harmony export */   fetchOrgSubscription: () => (/* binding */ fetchOrgSubscription),\n/* harmony export */   getOrgSubscriptionStatus: () => (/* binding */ getOrgSubscriptionStatus),\n/* harmony export */   getSubscriptionStatusText: () => (/* binding */ getSubscriptionStatusText),\n/* harmony export */   isDatabaseAllowed: () => (/* binding */ isDatabaseAllowed),\n/* harmony export */   isPro: () => (/* binding */ isPro),\n/* harmony export */   isTrial: () => (/* binding */ isTrial),\n/* harmony export */   isValidCoupon: () => (/* binding */ isValidCoupon)\n/* harmony export */ });\n// Subscription helper functions (client-side)\n// For multi-tenant - subscriptions are per-organization\n// Client-side cache for organization subscription status\nlet cachedOrgSubscription = null;\n/**\r\n * Fetch and cache organization subscription status from server\r\n * Call this on app load\r\n */ async function fetchOrgSubscription(orgId) {\n    if (!orgId) {\n        return {\n            isPro: false,\n            isTrial: false\n        };\n    }\n    try {\n        console.log(\"[Subscription] Fetching status for:\", orgId);\n        const res = await fetch(`/api/subscription?orgId=${encodeURIComponent(orgId)}`, {\n            cache: \"no-store\"\n        });\n        if (res.ok) {\n            const data = await res.json();\n            console.log(\"[Subscription] API Response:\", data);\n            cachedOrgSubscription = {\n                isPro: data.isPro,\n                isTrial: data.isTrial,\n                planType: data.subscription?.planType,\n                orgId: data.organization?.id || null,\n                orgName: data.organization?.name || null\n            };\n            return {\n                isPro: data.isPro,\n                isTrial: data.isTrial,\n                planType: data.subscription?.planType\n            };\n        }\n    } catch (err) {\n        console.error(\"Failed to fetch subscription:\", err);\n    }\n    return {\n        isPro: false,\n        isTrial: false\n    };\n}\n/**\r\n * Get cached subscription status (synchronous)\r\n */ function getOrgSubscriptionStatus() {\n    return cachedOrgSubscription || {\n        isPro: false,\n        isTrial: false,\n        planType: undefined,\n        orgId: null,\n        orgName: null\n    };\n}\n/**\r\n * Check if current org has Pro (use cached value)\r\n */ function isPro() {\n    return cachedOrgSubscription?.isPro ?? false;\n}\n/**\r\n * Check if current org is on trial\r\n */ function isTrial() {\n    return cachedOrgSubscription?.isTrial ?? false;\n}\n/**\r\n * Feature names that require Pro subscription\r\n */ // Databases allowed on Free Plan\nconst FREE_DATABASE_TYPES = [\n    \"postgres\",\n    \"mysql\",\n    \"mssql\",\n    \"mongodb\",\n    \"redis\"\n];\n/**\r\n * Check if a database type is allowed for the current subscription\r\n */ function isDatabaseAllowed(type) {\n    // Pro/Trial users can access all databases\n    if (isPro()) {\n        return true;\n    }\n    // Free users restricted to specific types\n    return FREE_DATABASE_TYPES.includes(type);\n}\n/**\r\n * Feature names that require Pro subscription\r\n */ const PRO_FEATURES = [\n    \"version_control\",\n    \"commit_history\",\n    \"table_designer\",\n    \"data_editing\",\n    \"granular_permissions\",\n    \"unlimited_connections\",\n    \"json_export\",\n    \"sql_export\",\n    \"git_access\",\n    \"pro_databases\"\n];\nconst FREE_FEATURES = [\n    \"basic_query\",\n    \"csv_export\",\n    \"schema_explorer\",\n    \"query_history_limited\",\n    \"basic_git\" // Basic local commits only\n];\n/**\r\n * Check if a feature is available (based on org subscription)\r\n */ function canUseFeature(feature) {\n    // Free features are always available\n    if (FREE_FEATURES.includes(feature)) {\n        return true;\n    }\n    // Pro features require subscription\n    if (PRO_FEATURES.includes(feature)) {\n        return isPro();\n    }\n    // Unknown feature - default to requiring Pro\n    return isPro();\n}\n/**\r\n * Get subscription status text for display\r\n */ function getSubscriptionStatusText() {\n    const status = getOrgSubscriptionStatus();\n    if (!status.isPro) {\n        return \"Free Plan\";\n    }\n    if (status.isTrial) {\n        return \"Trial (1 month free)\";\n    }\n    return \"Pro\";\n}\n/**\r\n * Pricing info\r\n */ const PRICING = {\n    free: {\n        name: \"Free\",\n        price: 0,\n        period: \"forever\",\n        features: [\n            \"2 Database Connections\",\n            \"50 Query History Entries\",\n            \"Schema Explorer\",\n            \"CSV Export\",\n            \"Basic Query Editor\"\n        ]\n    },\n    pro_trial: {\n        name: \"Pro Trial\",\n        price: 0,\n        period: \"1 month\",\n        features: [\n            \"All Pro features FREE for 1 month\",\n            \"No credit card required\",\n            \"Cancel anytime\"\n        ]\n    },\n    pro_monthly: {\n        name: \"Pro Monthly\",\n        price: 29,\n        period: \"month\",\n        features: [\n            \"Unlimited Connections\",\n            \"Unlimited Query History\",\n            \"Version Control & Commits\",\n            \"Table Designer\",\n            \"Data Grid Editing\",\n            \"Granular Permissions\",\n            \"CSV, JSON, SQL Export\",\n            \"Priority Support\"\n        ]\n    },\n    pro_yearly: {\n        name: \"Pro Yearly\",\n        price: 249,\n        period: \"year\",\n        savings: \"29%\",\n        features: [\n            \"Everything in Pro Monthly\",\n            \"2 Months FREE\",\n            \"Priority Support\",\n            \"Early Access to New Features\"\n        ]\n    },\n    enterprise_monthly: {\n        name: \"Enterprise Monthly\",\n        price: 99,\n        period: \"month\",\n        features: [\n            \"Everything in Pro\",\n            \"SSO / SAML\",\n            \"Audit Logs\",\n            \"Dedicated Support\",\n            \"99.9% SLA\",\n            \"Advanced Security\"\n        ]\n    },\n    enterprise_yearly: {\n        name: \"Enterprise Yearly\",\n        price: 999,\n        period: \"year\",\n        savings: \"16%\",\n        features: [\n            \"Everything in Enterprise Monthly\",\n            \"2 Months FREE\",\n            \"Dedicated Success Manager\",\n            \"Custom Contracts\",\n            \"Training Sessions\"\n        ]\n    }\n};\n/**\r\n * Coupon configuration\r\n */ const COUPONS = {\n    \"bosdb100\": {\n        discount_percent: 100,\n        description: \"100% OFF Monthly Plan\",\n        allowed_plans: [\n            \"pro_monthly\"\n        ]\n    },\n    \"omnigang10\": {\n        discount_percent: 100,\n        description: \"100% OFF Monthly Plan\",\n        allowed_plans: [\n            \"pro_monthly\"\n        ]\n    },\n    \"omnigang100\": {\n        discount_percent: 100,\n        description: \"100% OFF Yearly Plan\",\n        allowed_plans: [\n            \"pro_yearly\"\n        ]\n    }\n};\n/**\r\n * Validate a coupon code for a specific plan\r\n */ function isValidCoupon(code, planId) {\n    const coupon = COUPONS[code];\n    if (!coupon) return false;\n    // If planId is provided, check if it's allowed for this coupon\n    if (planId && coupon.allowed_plans) {\n        return coupon.allowed_plans.includes(planId);\n    }\n    return true;\n}\n/**\r\n * Calculate discounted price\r\n */ function calculateDiscountedPrice(originalPrice, couponCode, planId) {\n    if (!couponCode || !COUPONS[couponCode]) {\n        return originalPrice;\n    }\n    const coupon = COUPONS[couponCode];\n    // Validate plan restriction\n    if (planId && coupon.allowed_plans && !coupon.allowed_plans.includes(planId)) {\n        return originalPrice;\n    }\n    const discount = coupon.discount_percent;\n    return Math.max(0, originalPrice * (1 - discount / 100));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztJQUVwQiwrREFBK0Q7SUFDL0QsSUFBSUQsVUFBVUMsT0FBT0osYUFBYSxFQUFFO1FBQ2hDLE9BQU9JLE9BQU9KLGFBQWEsQ0FBQ3JCLFFBQVEsQ0FBQ3dCO0lBQ3pDO0lBRUEsT0FBTztBQUNYO0FBRUE7O0NBRUMsR0FDTSxTQUFTRSx5QkFBeUJDLGFBQXFCLEVBQUVDLFVBQW1CLEVBQUVKLE1BQWU7SUFDaEcsSUFBSSxDQUFDSSxjQUFjLENBQUNWLE9BQU8sQ0FBQ1UsV0FBVyxFQUFFO1FBQ3JDLE9BQU9EO0lBQ1g7SUFFQSxNQUFNRixTQUFTUCxPQUFPLENBQUNVLFdBQVc7SUFFbEMsNEJBQTRCO0lBQzVCLElBQUlKLFVBQVVDLE9BQU9KLGFBQWEsSUFBSSxDQUFDSSxPQUFPSixhQUFhLENBQUNyQixRQUFRLENBQUN3QixTQUFTO1FBQzFFLE9BQU9HO0lBQ1g7SUFFQSxNQUFNRSxXQUFXSixPQUFPTixnQkFBZ0I7SUFDeEMsT0FBT1csS0FBS0MsR0FBRyxDQUFDLEdBQUdKLGdCQUFpQixLQUFJRSxXQUFXLEdBQUU7QUFDekQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9zZGIvd2ViLy4vc3JjL2xpYi9zdWJzY3JpcHRpb24udHM/YzY2OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTdWJzY3JpcHRpb24gaGVscGVyIGZ1bmN0aW9ucyAoY2xpZW50LXNpZGUpXHJcbi8vIEZvciBtdWx0aS10ZW5hbnQgLSBzdWJzY3JpcHRpb25zIGFyZSBwZXItb3JnYW5pemF0aW9uXHJcblxyXG4vLyBDbGllbnQtc2lkZSBjYWNoZSBmb3Igb3JnYW5pemF0aW9uIHN1YnNjcmlwdGlvbiBzdGF0dXNcclxubGV0IGNhY2hlZE9yZ1N1YnNjcmlwdGlvbjoge1xyXG4gICAgaXNQcm86IGJvb2xlYW47XHJcbiAgICBpc1RyaWFsOiBib29sZWFuO1xyXG4gICAgcGxhblR5cGU/OiAndHJpYWwnIHwgJ21vbnRobHknIHwgJ3llYXJseSc7XHJcbiAgICBvcmdJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIG9yZ05hbWU6IHN0cmluZyB8IG51bGw7XHJcbn0gfCBudWxsID0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbmQgY2FjaGUgb3JnYW5pemF0aW9uIHN1YnNjcmlwdGlvbiBzdGF0dXMgZnJvbSBzZXJ2ZXJcclxuICogQ2FsbCB0aGlzIG9uIGFwcCBsb2FkXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcmdTdWJzY3JpcHRpb24ob3JnSWQ6IHN0cmluZyk6IFByb21pc2U8eyBpc1BybzogYm9vbGVhbjsgaXNUcmlhbDogYm9vbGVhbjsgcGxhblR5cGU/OiBzdHJpbmcgfT4ge1xyXG4gICAgaWYgKCFvcmdJZCkge1xyXG4gICAgICAgIHJldHVybiB7IGlzUHJvOiBmYWxzZSwgaXNUcmlhbDogZmFsc2UgfTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU3Vic2NyaXB0aW9uXSBGZXRjaGluZyBzdGF0dXMgZm9yOicsIG9yZ0lkKTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS9zdWJzY3JpcHRpb24/b3JnSWQ9JHtlbmNvZGVVUklDb21wb25lbnQob3JnSWQpfWAsIHsgY2FjaGU6ICduby1zdG9yZScgfSk7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTdWJzY3JpcHRpb25dIEFQSSBSZXNwb25zZTonLCBkYXRhKTtcclxuICAgICAgICAgICAgY2FjaGVkT3JnU3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgaXNQcm86IGRhdGEuaXNQcm8sXHJcbiAgICAgICAgICAgICAgICBpc1RyaWFsOiBkYXRhLmlzVHJpYWwsXHJcbiAgICAgICAgICAgICAgICBwbGFuVHlwZTogZGF0YS5zdWJzY3JpcHRpb24/LnBsYW5UeXBlLFxyXG4gICAgICAgICAgICAgICAgb3JnSWQ6IGRhdGEub3JnYW5pemF0aW9uPy5pZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JnTmFtZTogZGF0YS5vcmdhbml6YXRpb24/Lm5hbWUgfHwgbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4geyBpc1BybzogZGF0YS5pc1BybywgaXNUcmlhbDogZGF0YS5pc1RyaWFsLCBwbGFuVHlwZTogZGF0YS5zdWJzY3JpcHRpb24/LnBsYW5UeXBlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHN1YnNjcmlwdGlvbjonLCBlcnIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgaXNQcm86IGZhbHNlLCBpc1RyaWFsOiBmYWxzZSB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNhY2hlZCBzdWJzY3JpcHRpb24gc3RhdHVzIChzeW5jaHJvbm91cylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmdTdWJzY3JpcHRpb25TdGF0dXMoKTogeyBpc1BybzogYm9vbGVhbjsgaXNUcmlhbDogYm9vbGVhbjsgcGxhblR5cGU/OiBzdHJpbmc7IG9yZ0lkOiBzdHJpbmcgfCBudWxsOyBvcmdOYW1lOiBzdHJpbmcgfCBudWxsIH0ge1xyXG4gICAgcmV0dXJuIGNhY2hlZE9yZ1N1YnNjcmlwdGlvbiB8fCB7IGlzUHJvOiBmYWxzZSwgaXNUcmlhbDogZmFsc2UsIHBsYW5UeXBlOiB1bmRlZmluZWQsIG9yZ0lkOiBudWxsLCBvcmdOYW1lOiBudWxsIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBjdXJyZW50IG9yZyBoYXMgUHJvICh1c2UgY2FjaGVkIHZhbHVlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGNhY2hlZE9yZ1N1YnNjcmlwdGlvbj8uaXNQcm8gPz8gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBjdXJyZW50IG9yZyBpcyBvbiB0cmlhbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJpYWwoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gY2FjaGVkT3JnU3Vic2NyaXB0aW9uPy5pc1RyaWFsID8/IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogRmVhdHVyZSBuYW1lcyB0aGF0IHJlcXVpcmUgUHJvIHN1YnNjcmlwdGlvblxyXG4gKi9cclxuLy8gRGF0YWJhc2VzIGFsbG93ZWQgb24gRnJlZSBQbGFuXHJcbmV4cG9ydCBjb25zdCBGUkVFX0RBVEFCQVNFX1RZUEVTID0gW1xyXG4gICAgJ3Bvc3RncmVzJyxcclxuICAgICdteXNxbCcsXHJcbiAgICAnbXNzcWwnLFxyXG4gICAgJ21vbmdvZGInLFxyXG4gICAgJ3JlZGlzJ1xyXG5dIGFzIGNvbnN0O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZGF0YWJhc2UgdHlwZSBpcyBhbGxvd2VkIGZvciB0aGUgY3VycmVudCBzdWJzY3JpcHRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGFiYXNlQWxsb3dlZCh0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIC8vIFByby9UcmlhbCB1c2VycyBjYW4gYWNjZXNzIGFsbCBkYXRhYmFzZXNcclxuICAgIGlmIChpc1BybygpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnJlZSB1c2VycyByZXN0cmljdGVkIHRvIHNwZWNpZmljIHR5cGVzXHJcbiAgICByZXR1cm4gKEZSRUVfREFUQUJBU0VfVFlQRVMgYXMgcmVhZG9ubHkgc3RyaW5nW10pLmluY2x1ZGVzKHR5cGUpO1xyXG59XHJcblxyXG4vKipcclxuICogRmVhdHVyZSBuYW1lcyB0aGF0IHJlcXVpcmUgUHJvIHN1YnNjcmlwdGlvblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBST19GRUFUVVJFUyA9IFtcclxuICAgICd2ZXJzaW9uX2NvbnRyb2wnLFxyXG4gICAgJ2NvbW1pdF9oaXN0b3J5JyxcclxuICAgICd0YWJsZV9kZXNpZ25lcicsXHJcbiAgICAnZGF0YV9lZGl0aW5nJyxcclxuICAgICdncmFudWxhcl9wZXJtaXNzaW9ucycsXHJcbiAgICAndW5saW1pdGVkX2Nvbm5lY3Rpb25zJyxcclxuICAgICdqc29uX2V4cG9ydCcsXHJcbiAgICAnc3FsX2V4cG9ydCcsXHJcbiAgICAnZ2l0X2FjY2VzcycsXHJcbiAgICAncHJvX2RhdGFiYXNlcydcclxuXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBjb25zdCBGUkVFX0ZFQVRVUkVTID0gW1xyXG4gICAgJ2Jhc2ljX3F1ZXJ5JyxcclxuICAgICdjc3ZfZXhwb3J0JyxcclxuICAgICdzY2hlbWFfZXhwbG9yZXInLFxyXG4gICAgJ3F1ZXJ5X2hpc3RvcnlfbGltaXRlZCcsIC8vIDUwIGVudHJpZXMgbWF4XHJcbiAgICAnYmFzaWNfZ2l0JyAgICAgICAgICAgICAvLyBCYXNpYyBsb2NhbCBjb21taXRzIG9ubHlcclxuXSBhcyBjb25zdDtcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZlYXR1cmUgaXMgYXZhaWxhYmxlIChiYXNlZCBvbiBvcmcgc3Vic2NyaXB0aW9uKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhblVzZUZlYXR1cmUoZmVhdHVyZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAvLyBGcmVlIGZlYXR1cmVzIGFyZSBhbHdheXMgYXZhaWxhYmxlXHJcbiAgICBpZiAoKEZSRUVfRkVBVFVSRVMgYXMgcmVhZG9ubHkgc3RyaW5nW10pLmluY2x1ZGVzKGZlYXR1cmUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJvIGZlYXR1cmVzIHJlcXVpcmUgc3Vic2NyaXB0aW9uXHJcbiAgICBpZiAoKFBST19GRUFUVVJFUyBhcyByZWFkb25seSBzdHJpbmdbXSkuaW5jbHVkZXMoZmVhdHVyZSkpIHtcclxuICAgICAgICByZXR1cm4gaXNQcm8oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVbmtub3duIGZlYXR1cmUgLSBkZWZhdWx0IHRvIHJlcXVpcmluZyBQcm9cclxuICAgIHJldHVybiBpc1BybygpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHN1YnNjcmlwdGlvbiBzdGF0dXMgdGV4dCBmb3IgZGlzcGxheVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvblN0YXR1c1RleHQoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHN0YXR1cyA9IGdldE9yZ1N1YnNjcmlwdGlvblN0YXR1cygpO1xyXG4gICAgaWYgKCFzdGF0dXMuaXNQcm8pIHtcclxuICAgICAgICByZXR1cm4gJ0ZyZWUgUGxhbic7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhdHVzLmlzVHJpYWwpIHtcclxuICAgICAgICByZXR1cm4gJ1RyaWFsICgxIG1vbnRoIGZyZWUpJztcclxuICAgIH1cclxuICAgIHJldHVybiAnUHJvJztcclxufVxyXG5cclxuLyoqXHJcbiAqIFByaWNpbmcgaW5mb1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBSSUNJTkcgPSB7XHJcbiAgICBmcmVlOiB7XHJcbiAgICAgICAgbmFtZTogJ0ZyZWUnLFxyXG4gICAgICAgIHByaWNlOiAwLFxyXG4gICAgICAgIHBlcmlvZDogJ2ZvcmV2ZXInLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXHJcbiAgICAgICAgICAgICcyIERhdGFiYXNlIENvbm5lY3Rpb25zJyxcclxuICAgICAgICAgICAgJzUwIFF1ZXJ5IEhpc3RvcnkgRW50cmllcycsXHJcbiAgICAgICAgICAgICdTY2hlbWEgRXhwbG9yZXInLFxyXG4gICAgICAgICAgICAnQ1NWIEV4cG9ydCcsXHJcbiAgICAgICAgICAgICdCYXNpYyBRdWVyeSBFZGl0b3InXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHByb190cmlhbDoge1xyXG4gICAgICAgIG5hbWU6ICdQcm8gVHJpYWwnLFxyXG4gICAgICAgIHByaWNlOiAwLFxyXG4gICAgICAgIHBlcmlvZDogJzEgbW9udGgnLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXHJcbiAgICAgICAgICAgICdBbGwgUHJvIGZlYXR1cmVzIEZSRUUgZm9yIDEgbW9udGgnLFxyXG4gICAgICAgICAgICAnTm8gY3JlZGl0IGNhcmQgcmVxdWlyZWQnLFxyXG4gICAgICAgICAgICAnQ2FuY2VsIGFueXRpbWUnXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHByb19tb250aGx5OiB7XHJcbiAgICAgICAgbmFtZTogJ1BybyBNb250aGx5JyxcclxuICAgICAgICBwcmljZTogMjksXHJcbiAgICAgICAgcGVyaW9kOiAnbW9udGgnLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXHJcbiAgICAgICAgICAgICdVbmxpbWl0ZWQgQ29ubmVjdGlvbnMnLFxyXG4gICAgICAgICAgICAnVW5saW1pdGVkIFF1ZXJ5IEhpc3RvcnknLFxyXG4gICAgICAgICAgICAnVmVyc2lvbiBDb250cm9sICYgQ29tbWl0cycsXHJcbiAgICAgICAgICAgICdUYWJsZSBEZXNpZ25lcicsXHJcbiAgICAgICAgICAgICdEYXRhIEdyaWQgRWRpdGluZycsXHJcbiAgICAgICAgICAgICdHcmFudWxhciBQZXJtaXNzaW9ucycsXHJcbiAgICAgICAgICAgICdDU1YsIEpTT04sIFNRTCBFeHBvcnQnLFxyXG4gICAgICAgICAgICAnUHJpb3JpdHkgU3VwcG9ydCdcclxuICAgICAgICBdXHJcbiAgICB9LFxyXG4gICAgcHJvX3llYXJseToge1xyXG4gICAgICAgIG5hbWU6ICdQcm8gWWVhcmx5JyxcclxuICAgICAgICBwcmljZTogMjQ5LFxyXG4gICAgICAgIHBlcmlvZDogJ3llYXInLFxyXG4gICAgICAgIHNhdmluZ3M6ICcyOSUnLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXHJcbiAgICAgICAgICAgICdFdmVyeXRoaW5nIGluIFBybyBNb250aGx5JyxcclxuICAgICAgICAgICAgJzIgTW9udGhzIEZSRUUnLFxyXG4gICAgICAgICAgICAnUHJpb3JpdHkgU3VwcG9ydCcsXHJcbiAgICAgICAgICAgICdFYXJseSBBY2Nlc3MgdG8gTmV3IEZlYXR1cmVzJ1xyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICBlbnRlcnByaXNlX21vbnRobHk6IHtcclxuICAgICAgICBuYW1lOiAnRW50ZXJwcmlzZSBNb250aGx5JyxcclxuICAgICAgICBwcmljZTogOTksXHJcbiAgICAgICAgcGVyaW9kOiAnbW9udGgnLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXHJcbiAgICAgICAgICAgICdFdmVyeXRoaW5nIGluIFBybycsXHJcbiAgICAgICAgICAgICdTU08gLyBTQU1MJyxcclxuICAgICAgICAgICAgJ0F1ZGl0IExvZ3MnLFxyXG4gICAgICAgICAgICAnRGVkaWNhdGVkIFN1cHBvcnQnLFxyXG4gICAgICAgICAgICAnOTkuOSUgU0xBJyxcclxuICAgICAgICAgICAgJ0FkdmFuY2VkIFNlY3VyaXR5J1xyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICBlbnRlcnByaXNlX3llYXJseToge1xyXG4gICAgICAgIG5hbWU6ICdFbnRlcnByaXNlIFllYXJseScsXHJcbiAgICAgICAgcHJpY2U6IDk5OSxcclxuICAgICAgICBwZXJpb2Q6ICd5ZWFyJyxcclxuICAgICAgICBzYXZpbmdzOiAnMTYlJyxcclxuICAgICAgICBmZWF0dXJlczogW1xyXG4gICAgICAgICAgICAnRXZlcnl0aGluZyBpbiBFbnRlcnByaXNlIE1vbnRobHknLFxyXG4gICAgICAgICAgICAnMiBNb250aHMgRlJFRScsXHJcbiAgICAgICAgICAgICdEZWRpY2F0ZWQgU3VjY2VzcyBNYW5hZ2VyJyxcclxuICAgICAgICAgICAgJ0N1c3RvbSBDb250cmFjdHMnLFxyXG4gICAgICAgICAgICAnVHJhaW5pbmcgU2Vzc2lvbnMnXHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvdXBvbiBjb25maWd1cmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQ09VUE9OUzogUmVjb3JkPHN0cmluZywgeyBkaXNjb3VudF9wZXJjZW50OiBudW1iZXIsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGFsbG93ZWRfcGxhbnM/OiBzdHJpbmdbXSB9PiA9IHtcclxuICAgICdib3NkYjEwMCc6IHtcclxuICAgICAgICBkaXNjb3VudF9wZXJjZW50OiAxMDAsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICcxMDAlIE9GRiBNb250aGx5IFBsYW4nLFxyXG4gICAgICAgIGFsbG93ZWRfcGxhbnM6IFsncHJvX21vbnRobHknXVxyXG4gICAgfSxcclxuICAgICdvbW5pZ2FuZzEwJzoge1xyXG4gICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IDEwMCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJzEwMCUgT0ZGIE1vbnRobHkgUGxhbicsXHJcbiAgICAgICAgYWxsb3dlZF9wbGFuczogWydwcm9fbW9udGhseSddXHJcbiAgICB9LFxyXG4gICAgJ29tbmlnYW5nMTAwJzoge1xyXG4gICAgICAgIGRpc2NvdW50X3BlcmNlbnQ6IDEwMCxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJzEwMCUgT0ZGIFllYXJseSBQbGFuJyxcclxuICAgICAgICBhbGxvd2VkX3BsYW5zOiBbJ3Byb195ZWFybHknXVxyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGEgY291cG9uIGNvZGUgZm9yIGEgc3BlY2lmaWMgcGxhblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb3Vwb24oY29kZTogc3RyaW5nLCBwbGFuSWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGNvdXBvbiA9IENPVVBPTlNbY29kZV07XHJcbiAgICBpZiAoIWNvdXBvbikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIC8vIElmIHBsYW5JZCBpcyBwcm92aWRlZCwgY2hlY2sgaWYgaXQncyBhbGxvd2VkIGZvciB0aGlzIGNvdXBvblxyXG4gICAgaWYgKHBsYW5JZCAmJiBjb3Vwb24uYWxsb3dlZF9wbGFucykge1xyXG4gICAgICAgIHJldHVybiBjb3Vwb24uYWxsb3dlZF9wbGFucy5pbmNsdWRlcyhwbGFuSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIGRpc2NvdW50ZWQgcHJpY2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVEaXNjb3VudGVkUHJpY2Uob3JpZ2luYWxQcmljZTogbnVtYmVyLCBjb3Vwb25Db2RlPzogc3RyaW5nLCBwbGFuSWQ/OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgaWYgKCFjb3Vwb25Db2RlIHx8ICFDT1VQT05TW2NvdXBvbkNvZGVdKSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUHJpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY291cG9uID0gQ09VUE9OU1tjb3Vwb25Db2RlXTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBwbGFuIHJlc3RyaWN0aW9uXHJcbiAgICBpZiAocGxhbklkICYmIGNvdXBvbi5hbGxvd2VkX3BsYW5zICYmICFjb3Vwb24uYWxsb3dlZF9wbGFucy5pbmNsdWRlcyhwbGFuSWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUHJpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGlzY291bnQgPSBjb3Vwb24uZGlzY291bnRfcGVyY2VudDtcclxuICAgIHJldHVybiBNYXRoLm1heCgwLCBvcmlnaW5hbFByaWNlICogKDEgLSBkaXNjb3VudCAvIDEwMCkpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjYWNoZWRPcmdTdWJzY3JpcHRpb24iLCJmZXRjaE9yZ1N1YnNjcmlwdGlvbiIsIm9yZ0lkIiwiaXNQcm8iLCJpc1RyaWFsIiwiY29uc29sZSIsImxvZyIsInJlcyIsImZldGNoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2FjaGUiLCJvayIsImRhdGEiLCJqc29uIiwicGxhblR5cGUiLCJzdWJzY3JpcHRpb24iLCJvcmdhbml6YXRpb24iLCJpZCIsIm9yZ05hbWUiLCJuYW1lIiwiZXJyIiwiZXJyb3IiLCJnZXRPcmdTdWJzY3JpcHRpb25TdGF0dXMiLCJ1bmRlZmluZWQiLCJGUkVFX0RBVEFCQVNFX1RZUEVTIiwiaXNEYXRhYmFzZUFsbG93ZWQiLCJ0eXBlIiwiaW5jbHVkZXMiLCJQUk9fRkVBVFVSRVMiLCJGUkVFX0ZFQVRVUkVTIiwiY2FuVXNlRmVhdHVyZSIsImZlYXR1cmUiLCJnZXRTdWJzY3JpcHRpb25TdGF0dXNUZXh0Iiwic3RhdHVzIiwiUFJJQ0lORyIsImZyZWUiLCJwcmljZSIsInBlcmlvZCIsImZlYXR1cmVzIiwicHJvX3RyaWFsIiwicHJvX21vbnRobHkiLCJwcm9feWVhcmx5Iiwic2F2aW5ncyIsImVudGVycHJpc2VfbW9udGhseSIsImVudGVycHJpc2VfeWVhcmx5IiwiQ09VUE9OUyIsImRpc2NvdW50X3BlcmNlbnQiLCJkZXNjcmlwdGlvbiIsImFsbG93ZWRfcGxhbnMiLCJpc1ZhbGlkQ291cG9uIiwiY29kZSIsInBsYW5JZCIsImNvdXBvbiIsImNhbGN1bGF0ZURpc2NvdW50ZWRQcmljZSIsIm9yaWdpbmFsUHJpY2UiLCJjb3Vwb25Db2RlIiwiZGlzY291bnQiLCJNYXRoIiwibWF4Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/subscription.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/Organization.ts":
/*!************************************!*\
  !*** ./src/models/Organization.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst OrganizationSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    type: {\n        type: String,\n        enum: [\n            \"individual\",\n            \"enterprise\"\n        ],\n        default: \"individual\"\n    },\n    domain: {\n        type: String\n    },\n    adminUserId: {\n        type: String,\n        default: null\n    },\n    subscription: {\n        plan: {\n            type: String,\n            enum: [\n                \"free\",\n                \"pro\",\n                \"enterprise\"\n            ],\n            default: \"free\"\n        },\n        planType: {\n            type: String,\n            enum: [\n                \"trial\",\n                \"monthly\",\n                \"yearly\"\n            ]\n        },\n        isTrial: {\n            type: Boolean,\n            default: false\n        },\n        activatedAt: Date,\n        expiresAt: Date\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    updatedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n// Prevent model overwrite in hot-reload, but force refresh in dev if needed to pick up schema changes\nif (true) {\n    delete (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Organization;\n}\nconst Organization = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Organization || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Organization\", OrganizationSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Organization);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL09yZ2FuaXphdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDbUQ7QUFtQm5ELE1BQU1FLHFCQUFxQixJQUFJRCw0Q0FBTUEsQ0FBZ0I7SUFDakRFLElBQUk7UUFBRUMsTUFBTUM7UUFBUUMsVUFBVTtRQUFNQyxRQUFRO0lBQUs7SUFDakRDLE1BQU07UUFBRUosTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDRixNQUFNO1FBQUVBLE1BQU1DO1FBQVFJLE1BQU07WUFBQztZQUFjO1NBQWE7UUFBRUMsU0FBUztJQUFhO0lBQ2hGQyxRQUFRO1FBQUVQLE1BQU1DO0lBQU87SUFDdkJPLGFBQWE7UUFBRVIsTUFBTUM7UUFBUUssU0FBUztJQUFLO0lBQzNDRyxjQUFjO1FBQ1ZDLE1BQU07WUFBRVYsTUFBTUM7WUFBUUksTUFBTTtnQkFBQztnQkFBUTtnQkFBTzthQUFhO1lBQUVDLFNBQVM7UUFBTztRQUMzRUssVUFBVTtZQUFFWCxNQUFNQztZQUFRSSxNQUFNO2dCQUFDO2dCQUFTO2dCQUFXO2FBQVM7UUFBQztRQUMvRE8sU0FBUztZQUFFWixNQUFNYTtZQUFTUCxTQUFTO1FBQU07UUFDekNRLGFBQWFDO1FBQ2JDLFdBQVdEO0lBQ2Y7SUFDQUUsV0FBVztRQUFFakIsTUFBTWU7UUFBTVQsU0FBU1MsS0FBS0csR0FBRztJQUFDO0lBQzNDQyxXQUFXO1FBQUVuQixNQUFNZTtRQUFNVCxTQUFTUyxLQUFLRyxHQUFHO0lBQUM7QUFDL0M7QUFFQSxzR0FBc0c7QUFDdEcsSUFBSUUsSUFBeUIsRUFBYztJQUN2QyxPQUFPeEIsd0RBQWUsQ0FBQzBCLFlBQVk7QUFDdkM7QUFDQSxNQUFNQSxlQUFxQzFCLHdEQUFlLENBQUMwQixZQUFZLElBQUkxQixxREFBYyxDQUFDLGdCQUFnQkU7QUFFMUcsaUVBQWV3QixZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvc2RiL3dlYi8uL3NyYy9tb2RlbHMvT3JnYW5pemF0aW9uLnRzPzJlNDMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIE1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJT3JnYW5pemF0aW9uIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0eXBlOiAnaW5kaXZpZHVhbCcgfCAnZW50ZXJwcmlzZSc7XHJcbiAgICBkb21haW4/OiBzdHJpbmc7XHJcbiAgICBhZG1pblVzZXJJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIHN1YnNjcmlwdGlvbjoge1xyXG4gICAgICAgIHBsYW46ICdmcmVlJyB8ICdwcm8nIHwgJ2VudGVycHJpc2UnO1xyXG4gICAgICAgIHBsYW5UeXBlPzogJ3RyaWFsJyB8ICdtb250aGx5JyB8ICd5ZWFybHknO1xyXG4gICAgICAgIGlzVHJpYWw6IGJvb2xlYW47XHJcbiAgICAgICAgYWN0aXZhdGVkQXQ/OiBzdHJpbmc7XHJcbiAgICAgICAgZXhwaXJlc0F0Pzogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBjcmVhdGVkQXQ6IERhdGU7XHJcbiAgICB1cGRhdGVkQXQ6IERhdGU7XHJcbn1cclxuXHJcbmNvbnN0IE9yZ2FuaXphdGlvblNjaGVtYSA9IG5ldyBTY2hlbWE8SU9yZ2FuaXphdGlvbj4oe1xyXG4gICAgaWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ2luZGl2aWR1YWwnLCAnZW50ZXJwcmlzZSddLCBkZWZhdWx0OiAnaW5kaXZpZHVhbCcgfSxcclxuICAgIGRvbWFpbjogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgIGFkbWluVXNlcklkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCB9LFxyXG4gICAgc3Vic2NyaXB0aW9uOiB7XHJcbiAgICAgICAgcGxhbjogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsnZnJlZScsICdwcm8nLCAnZW50ZXJwcmlzZSddLCBkZWZhdWx0OiAnZnJlZScgfSxcclxuICAgICAgICBwbGFuVHlwZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsndHJpYWwnLCAnbW9udGhseScsICd5ZWFybHknXSB9LFxyXG4gICAgICAgIGlzVHJpYWw6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICAgICAgICBhY3RpdmF0ZWRBdDogRGF0ZSxcclxuICAgICAgICBleHBpcmVzQXQ6IERhdGVcclxuICAgIH0sXHJcbiAgICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICAgIHVwZGF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG59KTtcclxuXHJcbi8vIFByZXZlbnQgbW9kZWwgb3ZlcndyaXRlIGluIGhvdC1yZWxvYWQsIGJ1dCBmb3JjZSByZWZyZXNoIGluIGRldiBpZiBuZWVkZWQgdG8gcGljayB1cCBzY2hlbWEgY2hhbmdlc1xyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgZGVsZXRlIG1vbmdvb3NlLm1vZGVscy5Pcmdhbml6YXRpb247XHJcbn1cclxuY29uc3QgT3JnYW5pemF0aW9uOiBNb2RlbDxJT3JnYW5pemF0aW9uPiA9IG1vbmdvb3NlLm1vZGVscy5Pcmdhbml6YXRpb24gfHwgbW9uZ29vc2UubW9kZWwoJ09yZ2FuaXphdGlvbicsIE9yZ2FuaXphdGlvblNjaGVtYSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBPcmdhbml6YXRpb247XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIk9yZ2FuaXphdGlvblNjaGVtYSIsImlkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibmFtZSIsImVudW0iLCJkZWZhdWx0IiwiZG9tYWluIiwiYWRtaW5Vc2VySWQiLCJzdWJzY3JpcHRpb24iLCJwbGFuIiwicGxhblR5cGUiLCJpc1RyaWFsIiwiQm9vbGVhbiIsImFjdGl2YXRlZEF0IiwiRGF0ZSIsImV4cGlyZXNBdCIsImNyZWF0ZWRBdCIsIm5vdyIsInVwZGF0ZWRBdCIsInByb2Nlc3MiLCJtb2RlbHMiLCJPcmdhbml6YXRpb24iLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Organization.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsubscription%2Froute&page=%2Fapi%2Fsubscription%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsubscription%2Froute.ts&appDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CArush%20Gupta%5CDownloads%5CBosDB-Browser%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();